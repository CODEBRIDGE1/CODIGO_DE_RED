# PLATAFORMA CÓDIGO DE RED - Production Environment Variables
# Copy to .env and customize for your production server

# ============================================
# BACKEND / API
# ============================================
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=false  # IMPORTANTE: false en producción

# Database (PostgreSQL)
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=codigo_red_user
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_MIN_32_CHARS_PRODUCTION
POSTGRES_DB=codigo_red_db

DATABASE_URL=postgresql+asyncpg://codigo_red_user:CHANGE_THIS_STRONG_PASSWORD_MIN_32_CHARS_PRODUCTION@postgres:5432/codigo_red_db

# Redis (Celery broker + cache)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_URL=redis://redis:6379/0

# Celery
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1

# MinIO (S3-compatible storage)
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=CHANGE_THIS_MINIO_SECRET_KEY_PRODUCTION
MINIO_BUCKET_NAME=evidences
MINIO_USE_SSL=false
# IMPORTANTE: Usar la IP pública del servidor para presigned URLs
MINIO_EXTERNAL_ENDPOINT=31.97.210.250:9000

# Security / JWT
# IMPORTANTE: Generar con: openssl rand -hex 32
SECRET_KEY=CHANGE_THIS_GENERATE_WITH_OPENSSL_RAND_HEX_32_MIN_64_CHARS
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS (frontend origins allowed - comma separated)
# IMPORTANTE: Agregar TODAS las URLs desde donde se accederá al frontend
# Formato: http://IP:PORT,http://DOMAIN,https://DOMAIN
CORS_ORIGINS=http://31.97.210.250:5173,http://localhost:5173
FRONTEND_URL=http://31.97.210.250:5173

# Rate Limiting
RATE_LIMIT_PER_MINUTE=100

# Environment
ENVIRONMENT=production  # IMPORTANTE: production para habilitar seguridad

# Logging
LOG_LEVEL=INFO  # INFO o WARNING en producción (DEBUG solo para troubleshooting)

# ============================================
# FRONTEND
# ============================================
# IMPORTANTE: Usar la IP pública o dominio del servidor
VITE_API_BASE_URL=http://31.97.210.250:8001
VITE_APP_NAME="Código de Red Platform"

# ============================================
# SEGURIDAD ADICIONAL (Producción)
# ============================================
# Descomentar y configurar si usas HTTPS:
# MINIO_USE_SSL=true
# MINIO_EXTERNAL_ENDPOINT=yourdomain.com:9000

# Descomentar si usas Sentry para monitoreo:
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ============================================
# CHECKLIST DE PRODUCCIÓN
# ============================================
# ✅ Cambiar todos los passwords/secrets
# ✅ ENVIRONMENT=production
# ✅ API_RELOAD=false
# ✅ CORS_ORIGINS con IPs/dominios correctos
# ✅ FRONTEND_URL con IP/dominio del servidor
# ✅ VITE_API_BASE_URL con IP/dominio del servidor
# ✅ MINIO_EXTERNAL_ENDPOINT con IP/dominio del servidor
# ✅ LOG_LEVEL=INFO o WARNING
# ✅ Firewall configurado (puertos 8001, 5173, 9000)
# ✅ Backups automáticos de PostgreSQL configurados
# ✅ SSL/HTTPS configurado (recomendado)
